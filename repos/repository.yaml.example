# GitHub Repository Configuration Template

# =============================================================================
# BASIC REPOSITORY SETTINGS (Required)
# =============================================================================
description: "REPLACE_WITH_REPOSITORY_DESCRIPTION"
visibility: private   # Options: public, private, internal - private default
homepage_url: ""      # Optional: URL to project homepage
default_branch: main  # Most common: main

# =============================================================================
# REPOSITORY FEATURES
# =============================================================================
has_issues: true    # Most common: true
has_projects: true  # Most common: true
has_wiki: false     # Most common: true
has_downloads: true # Most common: true

# =============================================================================
# MERGE SETTINGS
# =============================================================================
allow_merge_commit: true    # Most common: true
allow_rebase_merge: true    # Most common: true
allow_squash_merge: true    # Most common: true
allow_auto_merge: false     # Most common: false
allow_update_branch: false  # Most common: false

# Merge commit message settings
squash_merge_commit_title: COMMIT_OR_PR_TITLE  # Most common: COMMIT_OR_PR_TITLE
squash_merge_commit_message: COMMIT_MESSAGES   # Most common: COMMIT_MESSAGES
merge_commit_title: MERGE_MESSAGE              # Most common: MERGE_MESSAGE
merge_commit_message: PR_TITLE                 # Most common: PR_TITLE

# =============================================================================
# SECURITY AND WORKFLOW SETTINGS
# =============================================================================
web_commit_signoff_required: false  # Most common: false
delete_branch_on_merge: false       # Most common: false
is_template: false                  # Most common: false
archived: false                     # Most common: false
has_discussions: false              # Most common: false

# =============================================================================
# TOPICS (Optional)
# =============================================================================
#topics:
#  - topic1
#  - topic2
#  - topic3

# =============================================================================
# COLLABORATORS
# =============================================================================
# Individual collaborators with different permission levels
#push_collaborators:
#  - username1
#  - username2
#maintain_collaborators:
#  - username3
#  - username4
#admin_collaborators:
#  - username5
#  - username6

# =============================================================================
# TEAMS (Optional)
# =============================================================================
# Team-based permissions
#push_teams:
#  - team1
#  - team2
#maintain_teams:
#  - team3
#  - team4
#admin_teams:
#  - team5
#  - team6
# =============================================================================
# GITHUB PAGES (Optional)
# =============================================================================
# pages:
#     cname: example.com
#     branch: main
#     path: /
#     build_type: workflow  # Options: workflow, legacy

# =============================================================================
# BRANCH PROTECTION - DEPRECATED STYLE (Optional)
# =============================================================================
#branch_protections_v4:
#   - pattern: main
#     allows_deletions: false
#     allows_force_pushes: false
#     blocks_creations: false
#     enforce_admins: true
#     require_conversation_resolution: false
#     require_signed_commits: false
#     required_linear_history: false
#     required_pull_request_reviews:
#       required_approving_review_count: 1
#       dismiss_stale_reviews: true
#       require_code_owner_reviews: false
#       restrict_dismissals: false
#       require_last_push_approval: true
#     required_status_checks:
#       strict: true
#     restricts_pushes: false
#     lock_branch: false

# =============================================================================
# RULESETS - ADVANCED STYLE (Recommended)
# =============================================================================
# This is the recommended approach for new repositories
rulesets:
  # Protect main branch with standard requirements
  - enforcement: active
    name: Protect main branch
    rules:
      deletion: true
      non_fast_forward: true
      pull_request:
        dismiss_stale_reviews_on_push: true
        require_code_owner_review: false
        require_last_push_approval: true
        required_approving_review_count: 1
        required_review_thread_resolution: false
      required_linear_history: true
      required_status_checks:
        required_check:
          - context: All required checks succeeded
            integration_id: 123456  # Replace with actual integration ID or 15368 for GitHub Actions
        strict_required_status_checks_policy: true
    target: branch
    conditions:
      ref_name:
        include:
          - ~DEFAULT_BRANCH

# =============================================================================
# SECURITY SETTINGS (Required)
# =============================================================================
vulnerability_alerts_enabled: true

# =============================================================================
# ENVIRONMENTS (Optional)
# =============================================================================
# Configure repository environments for deployment protection
#
# IMPORTING EXISTING ENVIRONMENTS:
#   To import existing environments from GitHub, enable in config/import-config.yaml:
#     feature_github_environment: true
#   Then run: go run main.go import owner/repo
#   OR:       go run main.go bulk-import
#   The same compiled binary reads the config file dynamically - no rebuild needed!
#
# CREATING NEW ENVIRONMENTS:
#   Simply add the environments configuration below - they will be created during provisioning.
#
# Note: Secrets are NOT managed through this configuration - they must be
# managed separately through GitHub UI or API.
#
# For detailed examples and field reference, see:
#   ../github-terraformer/docs/github_environments.md
#   ../github-terraformer/docs/DEVELOPERS_GUIDE.md#environment-configuration
#
#environments:
#  - environment: production
#    wait_timer: 30000  # Wait time in milliseconds before allowing deployments
#    can_admins_bypass: false  # Whether admins can bypass deployment protections
#    prevent_self_review: true  # Prevent users from approving their own deployments
#    reviewers:
#      users:  # List of GitHub usernames who can approve deployments
#        - octocat
#        - hubot
#      teams:  # List of team slugs who can approve deployments
#        - platform-team
#        - security-team
#    deployment_branch_policy:
#      protected_branches: true  # Only allow deployments from protected branches
#      custom_branch_policies: false  # Whether to use custom branch patterns
#
#  - environment: staging
#    can_admins_bypass: true
#    prevent_self_review: false
#    deployment_branch_policy:
#      protected_branches: false
#      custom_branch_policies: false
#
#  - environment: development
#    deployment_branch_policy:
#      protected_branches: false
#      custom_branch_policies: false
